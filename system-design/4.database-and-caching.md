## Databases (Very Important)

Databases are responsible for storing, retrieving, and maintaining data
in a reliable, consistent, and performant way.

---

## SQL Databases

### What SQL is
Structured Query Language databases store data in **tables with rows and columns**
and enforce a **fixed schema**.

### Characteristics
- Strong consistency
- Structured schema
- Relationships via foreign keys
- ACID transactions

---

### MySQL / PostgreSQL

#### MySQL
- Widely used
- Simple to operate
- Good for read-heavy workloads
- Common in web applications

#### PostgreSQL
- Advanced features
- Strong compliance with SQL standards
- Supports complex queries
- Better for data integrity and analytics

---

### ACID Properties

ACID ensures reliable transactions.

- **Atomicity**  
  Transactions are all-or-nothing

- **Consistency**  
  Database moves from one valid state to another

- **Isolation**  
  Concurrent transactions do not interfere

- **Durability**  
  Committed data survives crashes

---

### Indexing

#### What indexing is
A data structure that improves query performance by reducing full table scans.

#### How it works
- Index stores sorted references to table rows
- Commonly implemented as B-Trees or Hashes

#### Pros
- Faster reads
- Efficient filtering and sorting

#### Cons
- Slower writes
- Additional storage usage

#### When to index
- Frequently queried columns
- Columns used in WHERE, JOIN, ORDER BY

---

### Joins

#### What joins are
Used to combine rows from multiple tables based on a related column.

#### Common join types
- INNER JOIN
- LEFT JOIN
- RIGHT JOIN
- FULL OUTER JOIN

#### Example
  


---

## NoSQL Databases

### What NoSQL is
Databases designed for **flexibility, scalability, and high performance**.

### Characteristics
- Schema-less or flexible schema
- Horizontally scalable
- Eventual consistency (often)
- Optimized for specific use cases

---

### Key-Value Stores (Redis)

#### What it is
Stores data as key-value pairs.

#### Characteristics
- Extremely fast
- In-memory storage
- Simple data model

#### Use cases
- Caching
- Session storage
- Rate limiting
- Real-time counters

---

### Document Stores (MongoDB)

#### What it is
Stores data as JSON-like documents.

#### Characteristics
- Flexible schema
- Nested data structures
- Easy to evolve schema

#### Use cases
- Content management systems
- User profiles
- Product catalogs

---

### Column Stores (Cassandra)

#### What it is
Stores data in wide columns optimized for large-scale writes.

#### Characteristics
- Highly scalable
- Distributed by default
- Tunable consistency

#### Use cases
- Time-series data
- IoT data
- Event logging

---

### Graph Databases (Neo4j)

#### What it is
Stores data as nodes and relationships.

#### Characteristics
- Relationship-focused queries
- Efficient graph traversal
- Schema-optional

#### Use cases
- Social networks
- Recommendation engines
- Fraud detection

---

## When to Use SQL vs NoSQL

| Criteria         | SQL                          | NoSQL                       |
|------------------|------------------------------|-----------------------------|
| Schema           | Fixed                         | Flexible                    |
| Transactions     | Strong ACID                  | Limited / Eventual          |
| Scalability      | Vertical                     | Horizontal                  |
| Relationships    | Complex joins                 | Embedded or references      |
| Best for         | Financial, enterprise apps   | Big data, real-time apps    |

---

## Caching

Caching stores frequently accessed data in faster storage
to reduce latency and database load.

---

### Why Caching is Needed
- Improve performance
- Reduce database load
- Lower response times
- Increase system scalability

---

### Redis / Memcached

#### Redis
- In-memory data store
- Supports complex data types
- Persistence support
- Pub/Sub capabilities

#### Memcached
- Simple key-value store
- Extremely fast
- No persistence
- Limited data structures

---

### Cache-Aside Pattern

#### How it works
1. Application checks cache
2. Cache miss â†’ query database
3. Store result in cache
4. Return data to client

#### Pros
- Simple and flexible
- Application controls cache

#### Cons
- Cache misses increase latency
- Risk of stale data

---

### Write-Through vs Write-Back

#### Write-Through
- Write to cache and database simultaneously
- Strong consistency
- Slower writes

#### Write-Back
- Write to cache first
- Database updated asynchronously
- Faster writes
- Risk of data loss

---

### Cache Invalidation

#### What it is
The process of removing or updating stale cache entries.

#### Why it is hard
- Multiple data sources
- Timing issues
- Distributed systems

#### Common strategies
- Time-to-Live (TTL)
- Write-based invalidation
- Event-driven invalidation
- Versioned keys
